{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Joystick = void 0;\n\nvar React = require(\"react\");\n\nvar shape_enum_1 = require(\"./enums/shape.enum\");\n\nvar shape_factory_1 = require(\"./shapes/shape.factory\");\n\nvar shape_bounds_factory_1 = require(\"./shapes/shape.bounds.factory\");\n\nvar InteractionEvents;\n\n(function (InteractionEvents) {\n  InteractionEvents[\"PointerDown\"] = \"pointerdown\";\n  InteractionEvents[\"PointerMove\"] = \"pointermove\";\n  InteractionEvents[\"PointerUp\"] = \"pointerup\";\n})(InteractionEvents || (InteractionEvents = {}));\n/**\n * Radians identifying the direction of the joystick\n */\n\n\nvar RadianQuadrantBinding;\n\n(function (RadianQuadrantBinding) {\n  RadianQuadrantBinding[RadianQuadrantBinding[\"TopRight\"] = 2.35619449] = \"TopRight\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"TopLeft\"] = -2.35619449] = \"TopLeft\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"BottomRight\"] = 0.785398163] = \"BottomRight\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"BottomLeft\"] = -0.785398163] = \"BottomLeft\";\n})(RadianQuadrantBinding || (RadianQuadrantBinding = {}));\n\nvar Joystick =\n/** @class */\nfunction (_super) {\n  __extends(Joystick, _super);\n\n  function Joystick(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._stickRef = React.createRef();\n    _this._baseRef = React.createRef();\n    _this._pointerId = null;\n    _this.state = {\n      dragging: false\n    };\n\n    _this._throttleMoveCallback = function () {\n      var lastCall = 0;\n      return function (event) {\n        var now = new Date().getTime();\n        var throttleAmount = _this.props.throttle || 0;\n\n        if (now - lastCall < throttleAmount) {\n          return;\n        }\n\n        lastCall = now;\n\n        if (_this.props.move) {\n          return _this.props.move(event);\n        }\n      };\n    }();\n\n    return _this;\n  }\n\n  Joystick.prototype.componentWillUnmount = function () {\n    var _this = this;\n\n    if (this.props.followCursor) {\n      window.removeEventListener(InteractionEvents.PointerMove, function (event) {\n        return _this._pointerMove(event);\n      });\n    }\n  };\n\n  Joystick.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (this.props.followCursor) {\n      //@ts-ignore\n      this._parentRect = this._baseRef.current.getBoundingClientRect();\n      this.setState({\n        dragging: true\n      });\n      window.addEventListener(InteractionEvents.PointerMove, function (event) {\n        return _this._pointerMove(event);\n      });\n\n      if (this.props.start) {\n        this.props.start({\n          type: \"start\",\n          x: null,\n          y: null,\n          distance: null,\n          direction: null\n        });\n      }\n    }\n  };\n  /**\n   * Update position of joystick - set state and trigger DOM manipulation\n   * @param coordinates\n   * @private\n   */\n\n\n  Joystick.prototype._updatePos = function (coordinates) {\n    var _this = this;\n\n    window.requestAnimationFrame(function () {\n      _this.setState({\n        coordinates: coordinates\n      });\n    });\n\n    if (typeof this.props.minDistance === 'number') {\n      if (coordinates.distance < this.props.minDistance) {\n        return;\n      }\n    }\n\n    this._throttleMoveCallback({\n      type: \"move\",\n      x: coordinates.relativeX,\n      y: -coordinates.relativeY,\n      direction: coordinates.direction,\n      distance: coordinates.distance\n    });\n  };\n  /**\n   * Handle pointerdown event\n   * @param e PointerEvent\n   * @private\n   */\n\n\n  Joystick.prototype._pointerDown = function (e) {\n    var _this = this;\n\n    if (this.props.disabled || this.props.followCursor) {\n      return;\n    } //@ts-ignore\n\n\n    this._parentRect = this._baseRef.current.getBoundingClientRect();\n    this.setState({\n      dragging: true\n    });\n    window.addEventListener(InteractionEvents.PointerUp, function (event) {\n      return _this._pointerUp(event);\n    });\n    window.addEventListener(InteractionEvents.PointerMove, function (event) {\n      return _this._pointerMove(event);\n    });\n    this._pointerId = e.pointerId; //@ts-ignore\n\n    this._stickRef.current.setPointerCapture(e.pointerId);\n\n    if (this.props.start) {\n      this.props.start({\n        type: \"start\",\n        x: null,\n        y: null,\n        distance: null,\n        direction: null\n      });\n    }\n  };\n  /**\n   * Use ArcTan2 (4 Quadrant inverse tangent) to identify the direction the joystick is pointing\n   * https://docs.oracle.com/cd/B12037_01/olap.101/b10339/x_arcsin003.htm\n   * @param atan2: number\n   * @private\n   */\n\n\n  Joystick.prototype._getDirection = function (atan2) {\n    if (atan2 > RadianQuadrantBinding.TopRight || atan2 < RadianQuadrantBinding.TopLeft) {\n      return \"FORWARD\";\n    } else if (atan2 < RadianQuadrantBinding.TopRight && atan2 > RadianQuadrantBinding.BottomRight) {\n      return \"RIGHT\";\n    } else if (atan2 < RadianQuadrantBinding.BottomLeft) {\n      return \"LEFT\";\n    }\n\n    return \"BACKWARD\";\n  };\n  /**\n   * Hypotenuse distance calculation\n   * @param x: number\n   * @param y: number\n   * @private\n   */\n\n\n  Joystick.prototype._distance = function (x, y) {\n    return Math.hypot(x, y);\n  };\n\n  Joystick.prototype._distanceToPercentile = function (distance) {\n    var percentageBaseSize = distance / (this._baseSize / 2) * 100;\n\n    if (percentageBaseSize > 100) {\n      return 100;\n    }\n\n    return percentageBaseSize;\n  };\n  /**\n   * Calculate X/Y and ArcTan within the bounds of the joystick\n   * @param event\n   * @private\n   */\n\n\n  Joystick.prototype._pointerMove = function (event) {\n    event.preventDefault();\n\n    if (this.state.dragging) {\n      if (!this.props.followCursor && event.pointerId !== this._pointerId) return;\n      var absoluteX = event.clientX;\n      var absoluteY = event.clientY;\n      var relativeX = absoluteX - this._parentRect.left - this._radius;\n      var relativeY = absoluteY - this._parentRect.top - this._radius;\n\n      var dist = this._distance(relativeX, relativeY); // @ts-ignore\n\n\n      var bounded = (0, shape_bounds_factory_1.shapeBoundsFactory)( //@ts-ignore\n      this.props.controlPlaneShape || this.props.baseShape, absoluteX, absoluteY, relativeX, relativeY, dist, this._radius, this._baseSize, this._parentRect);\n      relativeX = bounded.relativeX;\n      relativeY = bounded.relativeY;\n      var atan2 = Math.atan2(relativeX, relativeY);\n\n      this._updatePos({\n        relativeX: relativeX,\n        relativeY: relativeY,\n        distance: this._distanceToPercentile(dist),\n        direction: this._getDirection(atan2),\n        axisX: absoluteX - this._parentRect.left,\n        axisY: absoluteY - this._parentRect.top\n      });\n    }\n  };\n  /**\n   * Handle pointer up and de-register listen events\n   * @private\n   */\n\n\n  Joystick.prototype._pointerUp = function (event) {\n    var _this = this;\n\n    if (event.pointerId !== this._pointerId) return;\n    var stateUpdate = {\n      dragging: false\n    };\n\n    if (!this.props.sticky) {\n      stateUpdate.coordinates = undefined;\n    }\n\n    window.requestAnimationFrame(function () {\n      _this.setState(stateUpdate);\n    });\n    window.removeEventListener(InteractionEvents.PointerUp, function (event) {\n      return _this._pointerUp(event);\n    });\n    window.removeEventListener(InteractionEvents.PointerMove, function (event) {\n      return _this._pointerMove(event);\n    });\n    this._pointerId = null;\n\n    if (this.props.stop) {\n      this.props.stop({\n        type: \"stop\",\n        // @ts-ignore\n        x: this.props.sticky ? this.state.coordinates.relativeX : null,\n        // @ts-ignore\n        y: this.props.sticky ? this.state.coordinates.relativeY : null,\n        // @ts-ignore\n        direction: this.props.sticky ? this.state.coordinates.direction : null,\n        // @ts-ignore\n        distance: this.props.sticky ? this.state.coordinates.distance : null\n      });\n    }\n  };\n  /**\n   * Get the shape stylings for the base\n   * @private\n   */\n\n\n  Joystick.prototype.getBaseShapeStyle = function () {\n    var shape = this.props.baseShape || shape_enum_1.JoystickShape.Circle;\n    return (0, shape_factory_1.shapeFactory)(shape, this._baseSize);\n  };\n  /**\n   * Get the shape stylings for the stick\n   * @private\n   */\n\n\n  Joystick.prototype.getStickShapeStyle = function () {\n    var shape = this.props.stickShape || shape_enum_1.JoystickShape.Circle;\n    return (0, shape_factory_1.shapeFactory)(shape, this._baseSize);\n  };\n  /**\n   * Calculate base styles for pad\n   * @private\n   */\n\n\n  Joystick.prototype._getBaseStyle = function () {\n    var baseColor = this.props.baseColor !== undefined ? this.props.baseColor : \"#000033\";\n    var baseSizeString = \"\".concat(this._baseSize, \"px\");\n\n    var padStyle = __assign(__assign({}, this.getBaseShapeStyle()), {\n      height: baseSizeString,\n      width: baseSizeString,\n      background: baseColor,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    });\n\n    if (this.props.baseImage) {\n      padStyle.background = \"url(\".concat(this.props.baseImage, \")\");\n      padStyle.backgroundSize = '100%';\n    }\n\n    return padStyle;\n  };\n  /**\n   * Calculate  base styles for joystick and translate\n   * @private\n   */\n\n\n  Joystick.prototype._getStickStyle = function () {\n    var stickColor = this.props.stickColor !== undefined ? this.props.stickColor : \"#3D59AB\";\n    var stickSize = \"\".concat(this._baseSize / 1.5, \"px\");\n\n    var stickStyle = __assign(__assign({}, this.getStickShapeStyle()), {\n      background: stickColor,\n      cursor: \"move\",\n      height: stickSize,\n      width: stickSize,\n      border: 'none',\n      flexShrink: 0,\n      touchAction: 'none'\n    });\n\n    if (this.props.stickImage) {\n      stickStyle.background = \"url(\".concat(this.props.stickImage, \")\");\n      stickStyle.backgroundSize = '100%';\n    }\n\n    if (this.state.coordinates !== undefined) {\n      stickStyle = Object.assign({}, stickStyle, {\n        position: 'absolute',\n        transform: \"translate3d(\".concat(this.state.coordinates.relativeX, \"px, \").concat(this.state.coordinates.relativeY, \"px, 0)\")\n      });\n    }\n\n    return stickStyle;\n  };\n\n  Joystick.prototype.render = function () {\n    var _this = this;\n\n    this._baseSize = this.props.size || 100;\n    this._radius = this._baseSize / 2;\n\n    var baseStyle = this._getBaseStyle();\n\n    var stickStyle = this._getStickStyle(); //@ts-ignore\n\n\n    return React.createElement(\"div\", {\n      className: this.props.disabled ? 'joystick-base-disabled' : '',\n      ref: this._baseRef,\n      style: baseStyle\n    }, React.createElement(\"button\", {\n      ref: this._stickRef,\n      disabled: this.props.disabled,\n      onPointerDown: function (event) {\n        return _this._pointerDown(event);\n      },\n      className: this.props.disabled ? 'joystick-disabled' : '',\n      style: stickStyle\n    }));\n  };\n\n  return Joystick;\n}(React.Component);\n\nexports.Joystick = Joystick;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAqBA,IAAKA,iBAAL;;AAAA,WAAKA,iBAAL,EAAsB;AAClBA;AACAA;AACAA;AACH,CAJD,EAAKA,iBAAiB,KAAjBA,iBAAiB,MAAtB;AAgCA;;;;;AAGA,IAAKC,qBAAL;;AAAA,WAAKA,qBAAL,EAA0B;AACtBA;AACAA;AACAA;AACAA;AACH,CALD,EAAKA,qBAAqB,KAArBA,qBAAqB,MAA1B;;AAOA;AAAA;AAAA;AAAuBC;;AASnB,oBAAYC,KAAZ,EAAiC;AAAjC,gBACIC,kBAAMD,KAAN,KAAY,IADhB;;AARiBE,sBAAgDC,KAAK,CAACC,SAAN,EAAhD;AACAF,qBAA4CC,KAAK,CAACC,SAAN,EAA5C;AAKTF,uBAA0B,IAA1B;AAIJA,SAAI,CAACG,KAAL,GAAa;AACTC,cAAQ,EAAE;AADD,KAAb;;AAGAJ,SAAI,CAACK,qBAAL,GAA8B;AAC1B,UAAIC,QAAQ,GAAG,CAAf;AACA,aAAO,UAACC,KAAD,EAA4B;AAE/B,YAAMC,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAZ;AACA,YAAMC,cAAc,GAAGX,KAAI,CAACF,KAAL,CAAWc,QAAX,IAAuB,CAA9C;;AACA,YAAIJ,GAAG,GAAGF,QAAN,GAAiBK,cAArB,EAAqC;AACjC;AACH;;AACDL,gBAAQ,GAAGE,GAAX;;AACA,YAAIR,KAAI,CAACF,KAAL,CAAWe,IAAf,EAAqB;AACjB,iBAAOb,KAAI,CAACF,KAAL,CAAWe,IAAX,CAAgBN,KAAhB,CAAP;AACH;AACJ,OAXD;AAYH,KAd4B,EAA7B;;;AAkBH;;AAEDO;AAAA;;AACI,QAAI,KAAKhB,KAAL,CAAWiB,YAAf,EAA6B;AACzBC,YAAM,CAACC,mBAAP,CAA2BtB,iBAAiB,CAACuB,WAA7C,EAA0D,iBAAK;AAAI,oBAAI,CAACC,YAAL,CAAkBZ,KAAlB;AAAwB,OAA3F;AACH;AACJ,GAJD;;AAMAO;AAAA;;AACI,QAAI,KAAKhB,KAAL,CAAWiB,YAAf,EAA6B;AACzB;AACA,WAAKK,WAAL,GAAmB,KAAKC,QAAL,CAAcC,OAAd,CAAsBC,qBAAtB,EAAnB;AAEA,WAAKC,QAAL,CAAc;AACVpB,gBAAQ,EAAE;AADA,OAAd;AAIAY,YAAM,CAACS,gBAAP,CAAwB9B,iBAAiB,CAACuB,WAA1C,EAAuD,iBAAK;AAAI,oBAAI,CAACC,YAAL,CAAkBZ,KAAlB;AAAwB,OAAxF;;AAEA,UAAI,KAAKT,KAAL,CAAW4B,KAAf,EAAsB;AAClB,aAAK5B,KAAL,CAAW4B,KAAX,CAAiB;AACbC,cAAI,EAAE,OADO;AAEbC,WAAC,EAAE,IAFU;AAGbC,WAAC,EAAE,IAHU;AAIbC,kBAAQ,EAAE,IAJG;AAKbC,mBAAS,EAAE;AALE,SAAjB;AAOH;AAEJ;AACJ,GAtBD;AAwBA;;;;;;;AAKQjB,kCAAR,UAAmBkB,WAAnB,EAAoD;AAApD;;AAEIhB,UAAM,CAACiB,qBAAP,CAA6B;AACzBjC,WAAI,CAACwB,QAAL,CAAc;AACVQ,mBAAW;AADD,OAAd;AAGH,KAJD;;AAKA,QAAG,OAAO,KAAKlC,KAAL,CAAWoC,WAAlB,KAAmC,QAAtC,EAA+C;AAC3C,UAAGF,WAAW,CAACF,QAAZ,GAAuB,KAAKhC,KAAL,CAAWoC,WAArC,EAAiD;AAC7C;AACH;AACJ;;AACD,SAAK7B,qBAAL,CAA2B;AACvBsB,UAAI,EAAE,MADiB;AAEvBC,OAAC,EAAEI,WAAW,CAACG,SAFQ;AAGvBN,OAAC,EAAE,CAACG,WAAW,CAACI,SAHO;AAIvBL,eAAS,EAAEC,WAAW,CAACD,SAJA;AAKvBD,cAAQ,EAAEE,WAAW,CAACF;AALC,KAA3B;AAQH,GApBO;AAsBR;;;;;;;AAKQhB,oCAAR,UAAqBuB,CAArB,EAAoC;AAApC;;AACI,QAAI,KAAKvC,KAAL,CAAWwC,QAAX,IAAuB,KAAKxC,KAAL,CAAWiB,YAAtC,EAAoD;AAChD;AACH,KAH+B,CAIhC;;;AACA,SAAKK,WAAL,GAAmB,KAAKC,QAAL,CAAcC,OAAd,CAAsBC,qBAAtB,EAAnB;AAEA,SAAKC,QAAL,CAAc;AACVpB,cAAQ,EAAE;AADA,KAAd;AAIAY,UAAM,CAACS,gBAAP,CAAwB9B,iBAAiB,CAAC4C,SAA1C,EAAqD,iBAAK;AAAI,kBAAI,CAACC,UAAL,CAAgBjC,KAAhB;AAAsB,KAApF;AACAS,UAAM,CAACS,gBAAP,CAAwB9B,iBAAiB,CAACuB,WAA1C,EAAuD,iBAAK;AAAI,kBAAI,CAACC,YAAL,CAAkBZ,KAAlB;AAAwB,KAAxF;AACA,SAAKkC,UAAL,GAAkBJ,CAAC,CAACK,SAApB,CAbgC,CAchC;;AACA,SAAKC,SAAL,CAAerB,OAAf,CAAuBsB,iBAAvB,CAAyCP,CAAC,CAACK,SAA3C;;AAEA,QAAI,KAAK5C,KAAL,CAAW4B,KAAf,EAAsB;AAClB,WAAK5B,KAAL,CAAW4B,KAAX,CAAiB;AACbC,YAAI,EAAE,OADO;AAEbC,SAAC,EAAE,IAFU;AAGbC,SAAC,EAAE,IAHU;AAIbC,gBAAQ,EAAE,IAJG;AAKbC,iBAAS,EAAE;AALE,OAAjB;AAOH;AAEJ,GA3BO;AA6BR;;;;;;;;AAMQjB,qCAAR,UAAsB+B,KAAtB,EAAmC;AAC/B,QAAIA,KAAK,GAAGjD,qBAAqB,CAACkD,QAA9B,IAA0CD,KAAK,GAAGjD,qBAAqB,CAACmD,OAA5E,EAAqF;AACjF,aAAO,SAAP;AACH,KAFD,MAEO,IAAIF,KAAK,GAAGjD,qBAAqB,CAACkD,QAA9B,IAA0CD,KAAK,GAAGjD,qBAAqB,CAACoD,WAA5E,EAAyF;AAC5F,aAAO,OAAP;AACH,KAFM,MAEA,IAAIH,KAAK,GAAGjD,qBAAqB,CAACqD,UAAlC,EAA8C;AACjD,aAAO,MAAP;AACH;;AACD,WAAO,UAAP;AAGH,GAXO;AAaR;;;;;;;;AAMQnC,iCAAR,UAAkBc,CAAlB,EAA6BC,CAA7B,EAAsC;AAClC,WAAOqB,IAAI,CAACC,KAAL,CAAWvB,CAAX,EAAcC,CAAd,CAAP;AACH,GAFO;;AAGAf,6CAAR,UAA8BgB,QAA9B,EAA6C;AACzC,QAAMsB,kBAAkB,GAAGtB,QAAQ,IAAI,KAAKuB,SAAL,GAAe,CAAnB,CAAR,GAAgC,GAA3D;;AACA,QAAGD,kBAAkB,GAAG,GAAxB,EAA4B;AACxB,aAAO,GAAP;AACH;;AACD,WAAOA,kBAAP;AACH,GANO;AAQR;;;;;;;AAKQtC,oCAAR,UAAqBP,KAArB,EAAwC;AACpCA,SAAK,CAAC+C,cAAN;;AACA,QAAI,KAAKnD,KAAL,CAAWC,QAAf,EAAyB;AACrB,UAAG,CAAC,KAAKN,KAAL,CAAWiB,YAAZ,IAA4BR,KAAK,CAACmC,SAAN,KAAoB,KAAKD,UAAxD,EAAoE;AACpE,UAAMc,SAAS,GAAGhD,KAAK,CAACiD,OAAxB;AACA,UAAMC,SAAS,GAAGlD,KAAK,CAACmD,OAAxB;AACA,UAAIvB,SAAS,GAAGoB,SAAS,GAAG,KAAKnC,WAAL,CAAiBuC,IAA7B,GAAoC,KAAKC,OAAzD;AACA,UAAIxB,SAAS,GAAGqB,SAAS,GAAG,KAAKrC,WAAL,CAAiByC,GAA7B,GAAmC,KAAKD,OAAxD;;AACA,UAAME,IAAI,GAAG,KAAKC,SAAL,CAAe5B,SAAf,EAA0BC,SAA1B,CAAb,CANqB,CAOrB;;;AACA,UAAM4B,OAAO,GAAG,gDACZ;AACA,WAAKlE,KAAL,CAAWmE,iBAAX,IAAgC,KAAKnE,KAAL,CAAWoE,SAF/B,EAGZX,SAHY,EAIZE,SAJY,EAKZtB,SALY,EAMZC,SANY,EAOZ0B,IAPY,EAQZ,KAAKF,OARO,EASZ,KAAKP,SATO,EAUZ,KAAKjC,WAVO,CAAhB;AAWAe,eAAS,GAAG6B,OAAO,CAAC7B,SAApB;AACAC,eAAS,GAAG4B,OAAO,CAAC5B,SAApB;AACA,UAAMS,KAAK,GAAGK,IAAI,CAACL,KAAL,CAAWV,SAAX,EAAsBC,SAAtB,CAAd;;AAEA,WAAK+B,UAAL,CAAgB;AACZhC,iBAAS,WADG;AAEZC,iBAAS,WAFG;AAGZN,gBAAQ,EAAE,KAAKsC,qBAAL,CAA2BN,IAA3B,CAHE;AAIZ/B,iBAAS,EAAE,KAAKsC,aAAL,CAAmBxB,KAAnB,CAJC;AAKZyB,aAAK,EAAEf,SAAS,GAAG,KAAKnC,WAAL,CAAiBuC,IALxB;AAMZY,aAAK,EAAEd,SAAS,GAAG,KAAKrC,WAAL,CAAiByC;AANxB,OAAhB;AAQH;AACJ,GAlCO;AAsCR;;;;;;AAIQ/C,kCAAR,UAAmBP,KAAnB,EAAsC;AAAtC;;AACI,QAAGA,KAAK,CAACmC,SAAN,KAAoB,KAAKD,UAA5B,EAAwC;AACxC,QAAM+B,WAAW,GAAG;AAChBpE,cAAQ,EAAE;AADM,KAApB;;AAGA,QAAI,CAAC,KAAKN,KAAL,CAAW2E,MAAhB,EAAwB;AACpBD,iBAAW,CAACxC,WAAZ,GAA0B0C,SAA1B;AACH;;AACD1D,UAAM,CAACiB,qBAAP,CAA6B;AACzBjC,WAAI,CAACwB,QAAL,CAAcgD,WAAd;AACH,KAFD;AAGAxD,UAAM,CAACC,mBAAP,CAA2BtB,iBAAiB,CAAC4C,SAA7C,EAAwD,iBAAK;AAAI,kBAAI,CAACC,UAAL,CAAgBjC,KAAhB;AAAsB,KAAvF;AACAS,UAAM,CAACC,mBAAP,CAA2BtB,iBAAiB,CAACuB,WAA7C,EAA0D,iBAAK;AAAI,kBAAI,CAACC,YAAL,CAAkBZ,KAAlB;AAAwB,KAA3F;AACA,SAAKkC,UAAL,GAAkB,IAAlB;;AACA,QAAI,KAAK3C,KAAL,CAAW6E,IAAf,EAAqB;AACjB,WAAK7E,KAAL,CAAW6E,IAAX,CAAgB;AACZhD,YAAI,EAAE,MADM;AAEZ;AACAC,SAAC,EAAE,KAAK9B,KAAL,CAAW2E,MAAX,GAAoB,KAAKtE,KAAL,CAAW6B,WAAX,CAAuBG,SAA3C,GAAuD,IAH9C;AAIZ;AACAN,SAAC,EAAE,KAAK/B,KAAL,CAAW2E,MAAX,GAAoB,KAAKtE,KAAL,CAAW6B,WAAX,CAAuBI,SAA3C,GAAuD,IAL9C;AAMZ;AACAL,iBAAS,EAAE,KAAKjC,KAAL,CAAW2E,MAAX,GAAoB,KAAKtE,KAAL,CAAW6B,WAAX,CAAuBD,SAA3C,GAAuD,IAPtD;AAQZ;AACAD,gBAAQ,EAAE,KAAKhC,KAAL,CAAW2E,MAAX,GAAoB,KAAKtE,KAAL,CAAW6B,WAAX,CAAuBF,QAA3C,GAAsD;AATpD,OAAhB;AAYH;AAEJ,GA7BO;AA+BR;;;;;;AAIQhB,yCAAR;AACI,QAAM8D,KAAK,GAAG,KAAK9E,KAAL,CAAWoE,SAAX,IAAwBW,2BAAcC,MAApD;AACA,WAAO,kCAAaF,KAAb,EAAoB,KAAKvB,SAAzB,CAAP;AACH,GAHO;AAIR;;;;;;AAIQvC,0CAAR;AACI,QAAM8D,KAAK,GAAG,KAAK9E,KAAL,CAAWiF,UAAX,IAAyBF,2BAAcC,MAArD;AACA,WAAO,kCAAaF,KAAb,EAAoB,KAAKvB,SAAzB,CAAP;AACH,GAHO;AAIR;;;;;;AAIQvC,qCAAR;AACI,QAAMkE,SAAS,GAAW,KAAKlF,KAAL,CAAWkF,SAAX,KAAyBN,SAAzB,GAAqC,KAAK5E,KAAL,CAAWkF,SAAhD,GAA4D,SAAtF;AAEA,QAAMC,cAAc,GAAG,UAAG,KAAK5B,SAAR,EAAiB,IAAjB,CAAvB;;AACA,QAAM6B,QAAQ,GAAGC,sBACV,KAAKC,iBAAL,EADU,GACc;AAC3BC,YAAM,EAAEJ,cADmB;AAE3BK,WAAK,EAAEL,cAFoB;AAG3BM,gBAAU,EAAEP,SAHe;AAI3BQ,aAAO,EAAE,MAJkB;AAK3BC,oBAAc,EAAE,QALW;AAM3BC,gBAAU,EAAE;AANe,KADd,CAAjB;;AASA,QAAI,KAAK5F,KAAL,CAAW6F,SAAf,EAA0B;AACtBT,cAAQ,CAACK,UAAT,GAAsB,cAAO,KAAKzF,KAAL,CAAW6F,SAAlB,EAA2B,GAA3B,CAAtB;AACAT,cAAQ,CAACU,cAAT,GAA0B,MAA1B;AACH;;AACD,WAAOV,QAAP;AAEH,GAnBO;AAqBR;;;;;;AAIQpE,sCAAR;AACI,QAAM+E,UAAU,GAAW,KAAK/F,KAAL,CAAW+F,UAAX,KAA0BnB,SAA1B,GAAsC,KAAK5E,KAAL,CAAW+F,UAAjD,GAA8D,SAAzF;AACA,QAAMC,SAAS,GAAG,UAAG,KAAKzC,SAAL,GAAiB,GAApB,EAAuB,IAAvB,CAAlB;;AAEA,QAAI0C,UAAU,GAAGZ,sBACV,KAAKa,kBAAL,EADU,GACe;AAC5BT,gBAAU,EAAEM,UADgB;AAE5BI,YAAM,EAAE,MAFoB;AAG5BZ,YAAM,EAAES,SAHoB;AAI5BR,WAAK,EAAEQ,SAJqB;AAK5BI,YAAM,EAAE,MALoB;AAM5BC,gBAAU,EAAE,CANgB;AAO5BC,iBAAW,EAAE;AAPe,KADf,CAAjB;;AAUA,QAAI,KAAKtG,KAAL,CAAWuG,UAAf,EAA2B;AACvBN,gBAAU,CAACR,UAAX,GAAwB,cAAO,KAAKzF,KAAL,CAAWuG,UAAlB,EAA4B,GAA5B,CAAxB;AACAN,gBAAU,CAACH,cAAX,GAA4B,MAA5B;AACH;;AAED,QAAI,KAAKzF,KAAL,CAAW6B,WAAX,KAA2B0C,SAA/B,EAA0C;AACtCqB,gBAAU,GAAGO,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,UAAlB,EAA8B;AACvCS,gBAAQ,EAAE,UAD6B;AAEvCC,iBAAS,EAAE,sBAAe,KAAKtG,KAAL,CAAW6B,WAAX,CAAuBG,SAAtC,EAA+C,MAA/C,EAA+CuE,MAA/C,CAAsD,KAAKvG,KAAL,CAAW6B,WAAX,CAAuBI,SAA7E,EAAsF,QAAtF;AAF4B,OAA9B,CAAb;AAIH;;AACD,WAAO2D,UAAP;AAEH,GA3BO;;AA6BRjF;AAAA;;AACI,SAAKuC,SAAL,GAAiB,KAAKvD,KAAL,CAAW6G,IAAX,IAAmB,GAApC;AACA,SAAK/C,OAAL,GAAe,KAAKP,SAAL,GAAiB,CAAhC;;AACA,QAAMuD,SAAS,GAAG,KAAKC,aAAL,EAAlB;;AACA,QAAMd,UAAU,GAAG,KAAKe,cAAL,EAAnB,CAJJ,CAKI;;;AACA,WACI7G;AAAK8G,eAAS,EAAE,KAAKjH,KAAL,CAAWwC,QAAX,GAAsB,wBAAtB,GAAiD,EAAjE;AAEK0E,SAAG,EAAE,KAAK3F,QAFf;AAGK4F,WAAK,EAAEL;AAHZ,OAII3G;AAAQ+G,SAAG,EAAE,KAAKrE,SAAlB;AACQL,cAAQ,EAAE,KAAKxC,KAAL,CAAWwC,QAD7B;AAEQ4E,mBAAa,EAAE,UAAC3G,KAAD,EAAW;AAAK,oBAAI,CAAC4G,YAAL,CAAkB5G,KAAlB;AAAwB,OAF/D;AAGQwG,eAAS,EAAE,KAAKjH,KAAL,CAAWwC,QAAX,GAAsB,mBAAtB,GAA4C,EAH/D;AAIQ2E,WAAK,EAAElB;AAJf,MAJJ,CADJ;AAYH,GAlBD;;AAmBJ;AAAC,CA5UD,CAAuB9F,KAAK,CAACmH,SAA7B;;AA+UIC","names":["InteractionEvents","RadianQuadrantBinding","__extends","props","_super","_this","React","createRef","state","dragging","_throttleMoveCallback","lastCall","event","now","Date","getTime","throttleAmount","throttle","move","Joystick","followCursor","window","removeEventListener","PointerMove","_pointerMove","_parentRect","_baseRef","current","getBoundingClientRect","setState","addEventListener","start","type","x","y","distance","direction","coordinates","requestAnimationFrame","minDistance","relativeX","relativeY","e","disabled","PointerUp","_pointerUp","_pointerId","pointerId","_stickRef","setPointerCapture","atan2","TopRight","TopLeft","BottomRight","BottomLeft","Math","hypot","percentageBaseSize","_baseSize","preventDefault","absoluteX","clientX","absoluteY","clientY","left","_radius","top","dist","_distance","bounded","controlPlaneShape","baseShape","_updatePos","_distanceToPercentile","_getDirection","axisX","axisY","stateUpdate","sticky","undefined","stop","shape","shape_enum_1","Circle","stickShape","baseColor","baseSizeString","padStyle","__assign","getBaseShapeStyle","height","width","background","display","justifyContent","alignItems","baseImage","backgroundSize","stickColor","stickSize","stickStyle","getStickShapeStyle","cursor","border","flexShrink","touchAction","stickImage","Object","assign","position","transform","concat","size","baseStyle","_getBaseStyle","_getStickStyle","className","ref","style","onPointerDown","_pointerDown","Component","exports"],"sources":["../../src/Joystick.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}